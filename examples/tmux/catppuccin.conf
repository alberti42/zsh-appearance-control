## ==== Catppuccin theme ====

## === Named palette ===

## == Catppuccin (Frappe) ==
set-option -ogq @thm_frappe_bg "#303446"
set-option -ogq @thm_frappe_fg "#c6d0f5"

# Colors
set-option -ogq @thm_frappe_rosewater "#f2d5cf"
set-option -ogq @thm_frappe_flamingo "#eebebe"
set-option -ogq @thm_frappe_pink "#f4b8e4"
set-option -ogq @thm_frappe_mauve "#ca9ee6"
set-option -ogq @thm_frappe_red "#e78284"
set-option -ogq @thm_frappe_maroon "#ea999c"
set-option -ogq @thm_frappe_peach "#ef9f76"
set-option -ogq @thm_frappe_yellow "#e5c890"
set-option -ogq @thm_frappe_green "#a6d189"
set-option -ogq @thm_frappe_teal "#81c8be"
set-option -ogq @thm_frappe_sky "#99d1db"
set-option -ogq @thm_frappe_sapphire "#85c1dc"
set-option -ogq @thm_frappe_blue "#8caaee"
set-option -ogq @thm_frappe_lavender "#babbf1"

# Surfaces and overlays
set-option -ogq @thm_frappe_subtext_1 "#a5adce"
set-option -ogq @thm_frappe_subtext_0 "#b5bfe2"
set-option -ogq @thm_frappe_overlay_2 "#949cbb"
set-option -ogq @thm_frappe_overlay_1 "#838ba7"
set-option -ogq @thm_frappe_overlay_0 "#737994"
set-option -ogq @thm_frappe_surface_2 "#626880"
set-option -ogq @thm_frappe_surface_1 "#51576d"
set-option -ogq @thm_frappe_surface_0 "#414559"
set-option -ogq @thm_frappe_mantle "#292c3c"
set-option -ogq @thm_frappe_crust "#232634"

# == Catppuccin (Macchiato) ==
set-option -ogq @thm_macchiato_bg "#24273a"
set-option -ogq @thm_macchiato_fg "#cad3f5"

# Colors
set-option -ogq @thm_macchiato_rosewater "#f4dbd6"
set-option -ogq @thm_macchiato_flamingo "#f0c6c6"
set-option -ogq @thm_macchiato_pink "#f5bde6"
set-option -ogq @thm_macchiato_mauve "#c6a0f6"
set-option -ogq @thm_macchiato_red "#ed8796"
set-option -ogq @thm_macchiato_maroon "#ee99a0"
set-option -ogq @thm_macchiato_peach "#f5a97f"
set-option -ogq @thm_macchiato_yellow "#eed49f"
set-option -ogq @thm_macchiato_green "#a6da95"
set-option -ogq @thm_macchiato_teal "#8bd5ca"
set-option -ogq @thm_macchiato_sky "#91d7e3"
set-option -ogq @thm_macchiato_sapphire "#7dc4e4"
set-option -ogq @thm_macchiato_blue "#8aadf4"
set-option -ogq @thm_macchiato_lavender "#b7bdf8"

# Surfaces and overlays
set-option -ogq @thm_macchiato_subtext_1 "#a5adcb"
set-option -ogq @thm_macchiato_subtext_0 "#b8c0e0"
set-option -ogq @thm_macchiato_overlay_2 "#939ab7"
set-option -ogq @thm_macchiato_overlay_1 "#8087a2"
set-option -ogq @thm_macchiato_overlay_0 "#6e738d"
set-option -ogq @thm_macchiato_surface_2 "#5b6078"
set-option -ogq @thm_macchiato_surface_1 "#494d64"
set-option -ogq @thm_macchiato_surface_0 "#363a4f"
set-option -ogq @thm_macchiato_mantle "#1e2030"
set-option -ogq @thm_macchiato_crust "#181926"

# == Catppuccin (Latte) ==
set -ogq @thm_latte_bg "#eff1f5"
set -ogq @thm_latte_fg "#4c4f69"

# Colors
set -ogq @thm_latte_rosewater "#dc8a78"
set -ogq @thm_latte_flamingo "#dd7878"
set -ogq @thm_latte_rosewater "#dc8a78"
set -ogq @thm_latte_pink "#ea76cb"
set -ogq @thm_latte_mauve "#8839ef"
set -ogq @thm_latte_red "#d20f39"
set -ogq @thm_latte_maroon "#e64553"
set -ogq @thm_latte_peach "#fe640b"
set -ogq @thm_latte_yellow "#df8e1d"
set -ogq @thm_latte_green "#40a02b"
set -ogq @thm_latte_teal "#179299"
set -ogq @thm_latte_sky "#04a5e5"
set -ogq @thm_latte_sapphire "#209fb5"
set -ogq @thm_latte_blue "#1e66f5"
set -ogq @thm_latte_lavender "#7287fd"

# Surfaces and overlays
set -ogq @thm_latte_subtext_1 "#6c6f85"
set -ogq @thm_latte_subtext_0 "#5c5f77"
set -ogq @thm_latte_overlay_2 "#7c7f93"
set -ogq @thm_latte_overlay_1 "#8c8fa1"
set -ogq @thm_latte_overlay_0 "#9ca0b0"
set -ogq @thm_latte_surface_2 "#acb0be"
set -ogq @thm_latte_surface_1 "#bcc0cc"
set -ogq @thm_latte_surface_0 "#ccd0da"
set -ogq @thm_latte_mantle "#e6e9ef"
set -ogq @thm_latte_crust "#dce0e8"

# == Catppuccin (Mocha) ==
set -ogq @thm_mocha_bg "#1e1e2e"
set -ogq @thm_mocha_fg "#cdd6f4"

# Colors
set -ogq @thm_mocha_rosewater "#f5e0dc"
set -ogq @thm_mocha_flamingo "#f2cdcd"
set -ogq @thm_mocha_rosewater "#f5e0dc"
set -ogq @thm_mocha_pink "#f5c2e7"
set -ogq @thm_mocha_mauve "#cba6f7"
set -ogq @thm_mocha_red "#f38ba8"
set -ogq @thm_mocha_maroon "#eba0ac"
set -ogq @thm_mocha_peach "#fab387"
set -ogq @thm_mocha_yellow "#f9e2af"
set -ogq @thm_mocha_green "#a6e3a1"
set -ogq @thm_mocha_teal "#94e2d5"
set -ogq @thm_mocha_sky "#89dceb"
set -ogq @thm_mocha_sapphire "#74c7ec"
set -ogq @thm_mocha_blue "#89b4fa"
set -ogq @thm_mocha_lavender "#b4befe"

# Surfaces and overlays
set -ogq @thm_mocha_subtext_1 "#a6adc8"
set -ogq @thm_mocha_subtext_0 "#bac2de"
set -ogq @thm_mocha_overlay_2 "#9399b2"
set -ogq @thm_mocha_overlay_1 "#7f849c"
set -ogq @thm_mocha_overlay_0 "#6c7086"
set -ogq @thm_mocha_surface_2 "#585b70"
set -ogq @thm_mocha_surface_1 "#45475a"
set -ogq @thm_mocha_surface_0 "#313244"
set -ogq @thm_mocha_mantle "#181825"
set -ogq @thm_mocha_crust "#11111b"

# === Appearance toggle ===

# Initialize with a default value (0 = light mode; 1 = dark mode)
set-option -g @dark_appearance 0
set-option -g @transparent 1

# Use a hook to run commands AFTER the client has attached and the environment variable has been updated.
# set-hook -g client-session-changed "if -F '#{==:#{DARK_APPEARANCE},1}' 'set-option @dark_appearance 1' 'set-option @dark_appearance 0' ; if-shell '[ -n \"$SSH_CONNECTION\" ]' 'unbind C-b ; set -g prefix C-M-b ; bind C-M-b send-prefix' 'unbind C-M-b ; set -g prefix C-b ; bind C-b send-prefix'"

# === Derived aliases (resolve at use-time via #{E:...}) ===
set-option -g @ui_bg         "#{?#{@dark_appearance},#{@thm_macchiato_bg},#{@thm_frappe_bg}}"
set-option -g @ui_fg         "#{?#{@dark_appearance},#{@thm_macchiato_fg},#{@thm_frappe_fg}}"
set-option -g @ui_crust      "#{?#{@dark_appearance},#{@thm_macchiato_crust},#{@thm_frappe_crust}}"
set-option -g @ui_mantle     "#{?#{@dark_appearance},#{@thm_macchiato_mantle},#{@thm_frappe_mantle}}"
set-option -g @ui_surface_0  "#{?#{@dark_appearance},#{@thm_macchiato_surface_0},#{@thm_frappe_surface_0}}"
set-option -g @ui_surface_1  "#{?#{@dark_appearance},#{@thm_macchiato_surface_1},#{@thm_frappe_surface_1}}"
set-option -g @ui_overlay_0  "#{?#{@dark_appearance},#{@thm_macchiato_overlay_0},#{@thm_frappe_overlay_0}}"
set-option -g @ui_overlay_2  "#{?#{@dark_appearance},#{@thm_macchiato_overlay_2},#{@thm_frappe_overlay_2}}"
set-option -g @ui_red        "#{?#{@dark_appearance},#{@thm_macchiato_red},#{@thm_frappe_red}}"
set-option -g @ui_green      "#{?#{@dark_appearance},#{@thm_macchiato_green},#{@thm_frappe_green}}"
set-option -g @ui_blue       "#{?#{@dark_appearance},#{@thm_macchiato_blue},#{@thm_frappe_blue}}"
set-option -g @ui_teal       "#{?#{@dark_appearance},#{@thm_macchiato_teal},#{@thm_frappe_teal}}"
set-option -g @ui_mauve      "#{?#{@dark_appearance},#{@thm_macchiato_mauve},#{@thm_frappe_mauve}}"

# === “brand” accents ===

# Popup border previously used #00bbff
set-option -ogq @accent_cyan        "#00bbff"

# === Window/session text and colors ===
set-option -g  @catppuccin_session_text        " #S"

## === Copy-mode / clock (uses named colors) ===
set-option -g  mode-style           "fg=#{E:@ui_fg},bg=#{E:@ui_surface_0},bold"
set-option -gF clock-mode-colour    "#{E:@ui_blue}"
set-hook   -g  after-copy-mode      'set-option -p cursor-style blinking-bar'

## === Popups (no hard-coded hex) ===

# Popup look (tmux >= 3.4 only)
%if "#{>=:#{version},3.4}"
  set-option -g popup-style        "bg=#{E:@ui_crust},fg=#{E:@ui_fg}"
  set-option -g popup-border-style "bg=#{E:@ui_crust},fg=#{@accent_cyan}"
  set-option -g  popup-border-lines rounded
%endif

## === Status/message styles ===
set-option -g status-style           "bg=#{?#{@transparent},default,#{E:@ui_bg}},fg=#{E:@ui_fg}"
set-option -g message-style          "fg=#{E:@ui_teal},bg=#{?#{@transparent},default,#{E:@ui_bg}},align=centre"
set-option -g message-command-style  "fg=#{E:@ui_teal},bg=#{?#{@transparent},default,#{E:@ui_bg}},align=centre"
set-option -g  status-right-length    100
set-option -g  status-left-length     100

## === Status-left (fully variable-driven) ===
# Left block color = green when normal, red when prefix, overlay_0 when “disabled”
set-option -g status-left "#{#[fg=#{?#{@tmux_disabled},#{E:@ui_overlay_0},#{?client_prefix,#{E:@ui_red},#{E:@ui_green}}}]\
#[fg=#{E:@ui_crust},bg=#{?#{@tmux_disabled},#{E:@ui_overlay_0},#{?client_prefix,#{E:@ui_red},#{E:@ui_green}}}]\
 #[fg=#{E:@ui_fg},bg=#{E:@ui_surface_1}]#{E:@catppuccin_session_text}\
#[fg=#{E:@ui_surface_1},bg=#{?#{@transparent},default,#{E:@ui_bg}}] }"

## === Window tabs ===
set-option -g  window-status-format \
'#[fg=#{E:@ui_overlay_2},bg=#{?#{@transparent},default,#{E:@ui_bg}}]#[fg=#{E:@ui_crust},bg=#{E:@ui_overlay_2}]#I \
#[fg=#{E:@ui_fg},bg=#{E:@ui_surface_1}] #{window_name}#[fg=#{E:@ui_surface_1},bg=#{?#{@transparent},default,#{E:@ui_bg}}]#[none]'

set-option -g window-status-current-format \
'#[fg=#{?#{@tmux_disabled},#{E:@ui_overlay_0},#{E:@ui_mauve}},bg=#{?#{@transparent},default,#{E:@ui_bg}}]\
#[fg=#{E:@ui_crust},bg=#{?#{@tmux_disabled},#{E:@ui_overlay_0},#{E:@ui_mauve}}]#I \
#[fg=#{E:@ui_fg},bg=#{E:@ui_surface_1}] #{window_name}#[fg=#{E:@ui_surface_1},bg=#{?#{@transparent},default,#{E:@ui_bg}}]#[none]'

# Right side empty (you can add modules later with variables)
set-option -g  status-right ""
